p8105\_hw5\_rm3609
================
Runqi Ma
2018/11/9

Problem 1
=========

Create a tidy dataframe containing data from all participants, including the subject ID, arm, and observations over time: Start with a dataframe containing all file names; the list.files function will help

``` r
long_data =
  tibble(
  files_name = list.files(path = "./data"))
```

Iterate over file names and read in data for each subject using purrr::map and saving the result as a new variable in the dataframe

``` r
read_data = function(path){
  read.csv(str_c("./data/", path))
           }

long_data = 
  long_data %>%  
  mutate(data = map(long_data$files_name, read_data))

long_data
```

    ## # A tibble: 20 x 2
    ##    files_name data                
    ##    <chr>      <list>              
    ##  1 con_01.csv <data.frame [1 × 8]>
    ##  2 con_02.csv <data.frame [1 × 8]>
    ##  3 con_03.csv <data.frame [1 × 8]>
    ##  4 con_04.csv <data.frame [1 × 8]>
    ##  5 con_05.csv <data.frame [1 × 8]>
    ##  6 con_06.csv <data.frame [1 × 8]>
    ##  7 con_07.csv <data.frame [1 × 8]>
    ##  8 con_08.csv <data.frame [1 × 8]>
    ##  9 con_09.csv <data.frame [1 × 8]>
    ## 10 con_10.csv <data.frame [1 × 8]>
    ## 11 exp_01.csv <data.frame [1 × 8]>
    ## 12 exp_02.csv <data.frame [1 × 8]>
    ## 13 exp_03.csv <data.frame [1 × 8]>
    ## 14 exp_04.csv <data.frame [1 × 8]>
    ## 15 exp_05.csv <data.frame [1 × 8]>
    ## 16 exp_06.csv <data.frame [1 × 8]>
    ## 17 exp_07.csv <data.frame [1 × 8]>
    ## 18 exp_08.csv <data.frame [1 × 8]>
    ## 19 exp_09.csv <data.frame [1 × 8]>
    ## 20 exp_10.csv <data.frame [1 × 8]>

Tidy the result; manipulate file names to include control arm and subject ID, make sure weekly observations are “tidy”, and do any other tidying that’s necessary

``` r
long_data = 
  long_data %>%  
  unnest() %>% 
  janitor::clean_names() %>% 
  gather(key = week, value = data, week_1:week_8) %>% 
  separate(files_name, into = c("arm", "id"), sep = "_") %>% 
  mutate(id = str_replace(id, ".csv",""),
         week = str_replace(week, "week_", ""))

long_data
```

    ## # A tibble: 160 x 4
    ##    arm   id    week   data
    ##    <chr> <chr> <chr> <dbl>
    ##  1 con   01    1      0.2 
    ##  2 con   02    1      1.13
    ##  3 con   03    1      1.77
    ##  4 con   04    1      1.04
    ##  5 con   05    1      0.47
    ##  6 con   06    1      2.37
    ##  7 con   07    1      0.03
    ##  8 con   08    1     -0.08
    ##  9 con   09    1      0.08
    ## 10 con   10    1      2.14
    ## # ... with 150 more rows

Make a spaghetti plot showing observations on each subject over time, and comment on differences between groups.

``` r
  long_data %>% 
  ggplot(aes(x = as.numeric(week), y = data, color = id)) +
  geom_line() +
  facet_grid(~arm)
```

![](p8105_hw5_rm3609_files/figure-markdown_github/unnamed-chunk-5-1.png)

Problem 2
=========
